/*! sberid-universallink - v1.0.5 - 2020-06-30
* Copyright (c) 2020 Maxim Terekhov; Licensed Unlicensed */
!function(a){"use strict";var b={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast","Opera Touch":"opera_touch",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},c={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",opera_touch:"Opera Touch",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},d={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e={messenger:"Facebook Messenger",facebook:"Facebook",twitter:"Twitter",line:"Line",wechat:"Wechat",instagram:"Instagram",electron:"Electron Application",outlook:"Microsoft Outlook",pinterest:"Pinterest App",thunderbird:"Thunderbird",webview:"Webview Based Browser",yaapp:"Yandex App"},f={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},g=function(){function a(){}return a.getFirstMatch=function(a,b){var c=b.match(a);return c&&c.length>0&&c[1]||""},a.getSecondMatch=function(a,b){var c=b.match(a);return c&&c.length>1&&c[2]||""},a.map=function(a,b){var c=[];if(Array.prototype.map)return Array.prototype.map.call(a,b);for(var d=0;d<a.length;d+=1)c.push(b(a[d]));return c},a.find=function(a,b){if(Array.prototype.find)return Array.prototype.find.call(a,b);for(var c=0;c<a.length;c+=1){var d=a[c];if(b(d,c))return d}},a.getBrowserAlias=function(a){return b[a]},a.getBrowserTypeByAlias=function(a){return c[a]||""},a.getUrlSearchParams=function(a){var b=a?a.split("?")[1]||a:window.location.search.slice(1),c={};if(b){b=b.split("#")[0];for(var d=b.split("&"),e=0;e<d.length;e+=1){var f=d[e].split("="),g=f[0],h=void 0===f[1]||f[1];if(g.match(/\[(\d+)?\]$/)){var i=g.replace(/\[(\d+)?\]/,"");if(c[i]||(c[i]=[]),g.match(/\[\d+\]$/)){var j=/\[(\d+)\]/.exec(g)[1];c[i][j]=h}else c[i].push(h)}else c[g]?c[g]&&"string"==typeof c[g]?(c[g]=[c[g]],c[g].push(h)):c[g].push(h):c[g]=h}}return c},a.buildUrl=function(a,b){var c="";for(var d in b){c+=d+"="+b[d]+"&"}return c.length>0&&(c=c.substring(0,c.length-1),a=a+"?"+c),a},a.isEncoded=function(a){return(a=a||"")!==decodeURIComponent(a)},a}(),h=/version\/(\d+(\.?_?\d+)+)/i,i=[{test:[/googlebot/i],describe:function(a){var b={name:"Googlebot"},c=g.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/opera/i],describe:function(a){var b={name:"Opera"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/opr\/|opios/i],describe:function(a){var b={name:"Opera"},c=g.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/opt/i],describe:function(a){var b={name:"Opera Touch"},c=g.getFirstMatch(/(?:opt)[\s/](\S+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/SamsungBrowser/i],describe:function(a){var b={name:"Samsung Internet for Android"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/Whale/i],describe:function(a){var b={name:"NAVER Whale Browser"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/MZBrowser/i],describe:function(a){var b={name:"MZ Browser"},c=g.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/focus/i],describe:function(a){var b={name:"Focus"},c=g.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/swing/i],describe:function(a){var b={name:"Swing"},c=g.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/coast/i],describe:function(a){var b={name:"Opera Coast"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/yabrowser/i],describe:function(a){var b={name:"Yandex Browser"},c=g.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/ucbrowser/i],describe:function(a){var b={name:"UC Browser"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/Maxthon|mxios/i],describe:function(a){var b={name:"Maxthon"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/epiphany/i],describe:function(a){var b={name:"Epiphany"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/puffin/i],describe:function(a){var b={name:"Puffin"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/sleipnir/i],describe:function(a){var b={name:"Sleipnir"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/k-meleon/i],describe:function(a){var b={name:"K-Meleon"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/micromessenger/i],describe:function(a){var b={name:"WeChat"},c=g.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/msie|trident/i],describe:function(a){var b={name:"Internet Explorer"},c=g.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/\sedg\//i],describe:function(a){var b={name:"Microsoft Edge"},c=g.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/edg([ea]|ios)/i],describe:function(a){var b={name:"Microsoft Edge"},c=g.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/vivaldi/i],describe:function(a){var b={name:"Vivaldi"},c=g.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/seamonkey/i],describe:function(a){var b={name:"SeaMonkey"},c=g.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/sailfish/i],describe:function(a){var b={name:"Sailfish"},c=g.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return c&&(b.version=c),b}},{test:[/silk/i],describe:function(a){var b={name:"Amazon Silk"},c=g.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/phantom/i],describe:function(a){var b={name:"PhantomJS"},c=g.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/slimerjs/i],describe:function(a){var b={name:"SlimerJS"},c=g.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var b={name:"BlackBerry"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var b={name:"WebOS Browser"},c=g.getFirstMatch(h,a)||g.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/bada/i],describe:function(a){var b={name:"Bada"},c=g.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/tizen/i],describe:function(a){var b={name:"Tizen"},c=g.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/qupzilla/i],describe:function(a){var b={name:"QupZilla"},c=g.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var b={name:"Firefox"},c=g.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/electron/i],describe:function(a){var b={name:"Electron"},c=g.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:[/chromium/i],describe:function(a){var b={name:"Chromium"},c=g.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/chrome|crios|crmo/i],describe:function(a){var b={name:"Chrome"},c=g.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return c&&(b.version=c),b}},{test:function(a){var b=!a.test(/like android/i),c=a.test(/android/i);return b&&c},describe:function(a){var b={name:"Android Browser"},c=g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/playstation 4/i],describe:function(a){var b={name:"PlayStation 4"},c=g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/safari|applewebkit/i],describe:function(a){var b={name:"Safari"},c=g.getFirstMatch(h,a);return c&&(b.version=c),b}},{test:[/.*/i],describe:function(a){var b=/^(.*)\/(.*) /,c=/^(.*)\/(.*)[ \t]\((.*)/,d=-1!==a.search("\\("),e=d?c:b;return{name:g.getFirstMatch(e,a),version:g.getSecondMatch(e,a)}}}],j=[{test:[/\bFB[\w_]+\/(Messenger|MESSENGER)/],describe:function(){return{name:e.messenger}}},{test:[/\bFB[\w_]+\//],describe:function(){return{name:e.facebook}}},{test:[/\bTwitter/i],describe:function(){return{name:e.twitter}}},{test:[/\bLine\//i],describe:function(){return{name:e.line}}},{test:[/\bMicroMessenger\//i],describe:function(){return{name:e.wechat}}},{test:[/\bInstagram/i],describe:function(a){return{name:e.instagram}}},{test:[/\bElectron/i],describe:function(){return{name:e.electron}}},{test:[/\bOutlook/i],describe:function(){return{name:e.outlook}}},{test:[/\bPinterest/i],describe:function(){return{name:e.pinterest}}},{test:[/\bThunderbird/i],describe:function(){return{name:e.thunderbird}}},{test:[/\bwebview/i,/; wv/],describe:function(){return{name:e.webview}}},{test:[/\bYaApp/i,/\bYandexSearch/i],describe:function(){return{name:e.yaapp}}}],k=[{test:[/Roku\/DVP/],describe:function(a){var b=g.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:f.Roku,version:b}}},{test:[/windows phone/i],describe:function(a){var b=g.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:f.WindowsPhone,version:b}}},{test:[/windows/i],describe:function(a){var b=g.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a);return{name:f.Windows,version:b}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var b={name:f.iOS},c=g.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return c&&(b.version=c),b}},{test:[/macintosh/i],describe:function(a){var b=g.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,".");return{name:f.MacOS,version:b}}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var b=g.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:f.iOS,version:b}}},{test:function(a){var b=!a.test(/like android/i),c=a.test(/android/i);return b&&c},describe:function(a){var b=g.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a);return{name:f.Android,version:b}}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var b=g.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),c={name:f.WebOS};return b&&b.length&&(c.version=b),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var b=g.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||g.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||g.getFirstMatch(/\bbb(\d+)/i,a);return{name:f.BlackBerry,version:b}}},{test:[/bada/i],describe:function(a){var b=g.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:f.Bada,version:b}}},{test:[/tizen/i],describe:function(a){var b=g.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:f.Tizen,version:b}}},{test:[/linux/i],describe:function(){return{name:f.Linux}}},{test:[/CrOS/],describe:function(){return{name:f.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var b=g.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:f.PlayStation4,version:b}}}],l=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var b=g.getFirstMatch(/(can-l01)/i,a)&&"Nova",c={type:d.mobile,vendor:"Huawei"};return b&&(c.model=b),c}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:d.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:d.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:d.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:d.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:d.tablet,vendor:"Amazon"}}},{test:[/tablet/i],describe:function(){return{type:d.tablet}}},{test:function(a){var b=a.test(/ipod|iphone/i),c=a.test(/like (ipod|iphone)/i);return b&&!c},describe:function(a){var b=g.getFirstMatch(/(ipod|iphone)/i,a);return{type:d.mobile,vendor:"Apple",model:b}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:d.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:d.mobile}}},{test:function(a){return"blackberry"===a.getBrowserName(!0)},describe:function(){return{type:d.mobile,vendor:"BlackBerry"}}},{test:function(a){return"bada"===a.getBrowserName(!0)},describe:function(){return{type:d.mobile}}},{test:function(a){return"windows phone"===a.getBrowserName()},describe:function(){return{type:d.mobile,vendor:"Microsoft"}}},{test:function(a){var b=Number(String(a.getOSVersion()).split(".")[0]);return"android"===a.getOSName(!0)&&b>=3},describe:function(){return{type:d.tablet}}},{test:function(a){return"android"===a.getOSName(!0)},describe:function(){return{type:d.mobile}}},{test:function(a){return"macos"===a.getOSName(!0)},describe:function(){return{type:d.desktop,vendor:"Apple"}}},{test:function(a){return"windows"===a.getOSName(!0)},describe:function(){return{type:d.desktop}}},{test:function(a){return"linux"===a.getOSName(!0)},describe:function(){return{type:d.desktop}}},{test:function(a){return"playstation 4"===a.getOSName(!0)},describe:function(){return{type:d.tv}}},{test:function(a){return"roku"===a.getOSName(!0)},describe:function(){return{type:d.tv}}}],m=function(){function a(a){if(void 0===a||null===a||""===a)throw new Error("UserAgent parameter can't be empty ");this._ua=a,this.parsedResult={},this.parse()}return a.prototype.getUA=function(){return this._ua},a.prototype.test=function(a){return a.test(this._ua)},a.prototype.parseBrowser=function(){var a=this;this.parsedResult.browser={};var b=g.find(i,function(b){if("function"==typeof b.test)return b.test(a);if(b.test instanceof Array)return b.test.some(function(b){return a.test(b)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.browser=b.describe(this.getUA())),this.parsedResult.browser},a.prototype.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},a.prototype.getBrowserName=function(a){return a?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},a.prototype.getBrowserVersion=function(){return this.getBrowser().version},a.prototype.parseOS=function(){var a=this;this.parsedResult.os={};var b=g.find(k,function(b){if("function"==typeof b.test)return b.test(a);if(b.test instanceof Array)return b.test.some(function(b){return a.test(b)});throw new Error("OS's test function is not valid")});return b&&(this.parsedResult.os=b.describe(this.getUA())),this.parsedResult.os},a.prototype.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},a.prototype.getOSName=function(a){var b=this.getOS().name;return a?String(b).toLowerCase()||"":b||""},a.prototype.getOSVersion=function(){return this.getOS().version},a.prototype.parseApp=function(){var a=this;this.parsedResult.app={};var b=g.find(j,function(b){if("function"==typeof b.test)return b.test(a);if(b.test instanceof Array)return b.test.some(function(b){return a.test(b)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.app=b.describe(this.getUA())),this.parsedResult.app},a.prototype.getApp=function(){return this.parsedResult.app?this.parsedResult.app:this.parseApp()},a.prototype.getAppName=function(a){return a?String(this.getApp().name).toLowerCase()||"":this.getApp().name||""},a.prototype.parsePlatform=function(){var a=this;this.parsedResult.platform={};var b=g.find(l,function(b){if("function"==typeof b.test)return b.test(a);if(b.test instanceof Array)return b.test.some(function(b){return a.test(b)});throw new Error("Platform's test function is not valid")});return b&&(this.parsedResult.platform=b.describe(this.getUA())),this.parsedResult.platform},a.prototype.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},a.prototype.getPlatformType=function(a){var b=this.getPlatform().type;return a?String(b).toLowerCase()||"":b||""},a.prototype.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseApp(),this},a.prototype.getResult=function(){return Object.assign({},this.parsedResult)},a}(),n=function(){function a(){}return a.getParser=function(a,b){if("string"!=typeof a)throw new Error("UserAgent should be a string");return new m(a)},a.parse=function(a){return new m(a).getResult()},a}(),o=function(){function a(){this._browsingInIncognitoMode=void 0}return a.prototype.getBrowsingMode=function(){return this._browsingInIncognitoMode},a.prototype.browsingInIncognitoMode=function(){this._browsingInIncognitoMode=!0},a.prototype.browsingInNormalMode=function(){this._browsingInIncognitoMode=!1},a.prototype.run=function(a){var b=this;(new p).browser(this).detectBrowsingMode(),this.retry(function(){return void 0!==b._browsingInIncognitoMode},function(){a(b._browsingInIncognitoMode)})},a.prototype.retry=function(a,b){var c=0,d=50,e=10,f=!1,g=window.setInterval(function(){a()&&(window.clearInterval(g),b(f)),c++>d&&(window.clearInterval(g),f=!0,b(f))},e)},a}(),p=function(){function a(){this._browser=void 0}return a.prototype.browser=function(a){return"object"==typeof this._browser?this._browser:(this._browser=this._resolve(a),this._browser)},a.prototype._resolve=function(a){return/constructor/i.test(window.HTMLElement)||navigator.vendor&&navigator.vendor.indexOf("Apple")>-1?new t(a):"MozAppearance"in document.documentElement.style?new r(a):window.webkitRequestFileSystem?new q(a):window.PointerEvent||window.MSPointerEvent?new s(a):new u(a)},a}(),q=function(a){return this.BrowsingModeDetector=a,this.detectBrowsingMode=function(){var a=this,b=function(){try{a.storageEstimateWrapper().then(function(b){(b||{}).quota<12e7?a.BrowsingModeDetector.browsingInIncognitoMode():a.BrowsingModeDetector.browsingInNormalMode()})}catch(b){a.BrowsingModeDetector.browsingInNormalMode()}},c=function(b){a.BrowsingModeDetector.browsingInIncognitoMode()};window.webkitRequestFileSystem(window.TEMPORARY,1,b,c)},this.storageEstimateWrapper=function(){return"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate():"webkitTemporaryStorage"in navigator&&"queryUsageAndQuota"in navigator.webkitTemporaryStorage?new Promise(function(a,b){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(b,c){a({usage:b,quota:c})},b)}):Promise.resolve({usage:NaN,quota:NaN})},this},r=function(a){return this.BrowsingModeDetector=a,this.detectBrowsingMode=function(){var a,b=this,c=function(c){void 0===b.BrowsingModeDetector.getBrowsingMode()&&b.BrowsingModeDetector.retry(function(){return"done"===a.readyState},function(e){if(e)return d(c);a.result&&b.BrowsingModeDetector.browsingInNormalMode()})},d=function(a){b.BrowsingModeDetector.browsingInIncognitoMode()};a=indexedDB.open("i"),a.onsuccess=c,a.onerror=d},this},s=function(a){return this.BrowsingModeDetector=a,this.detectBrowsingMode=function(){this.BrowsingModeDetector.browsingInNormalMode();try{window.indexedDB||this.BrowsingModeDetector.browsingInIncognitoMode()}catch(a){this.BrowsingModeDetector.browsingInIncognitoMode()}},this},t=function(a){function b(a){var b=a/4,c=new Array(b+1).join("aã‚"),d={size:a,payload:c};d.lastModifiedDate=new Date,d.name=1e5+~~(1e5*Math.random())+".txt";try{localStorage.setItem(d.name,JSON.stringify(d))}catch(a){try{localStorage.removeItem(d.name)}catch(a){}return!1}try{localStorage.removeItem(d.name)}catch(a){}return!0}return this.BrowsingModeDetector=a,this.detectBrowsingMode=function(){if(window.safariIncognito||!navigator.cookieEnabled)return void this.BrowsingModeDetector.browsingInIncognitoMode();try{window.openDatabase(null,null,null,null),window.localStorage.setItem("test",1)}catch(a){this.BrowsingModeDetector.browsingInIncognitoMode()}if(void 0===this.BrowsingModeDetector.getBrowsingMode()){window.localStorage.removeItem("test");b(5242880)?this.BrowsingModeDetector.browsingInIncognitoMode():this.BrowsingModeDetector.browsingInNormalMode()}},this},u=function(a){this.BrowsingModeDetector=a,this.detectBrowsingMode=function(){this.BrowsingModeDetector.browsingInNormalMode()}},v=function(){function a(a){this._config=a||{},this._params={},void 0===this._config.needAdditionalRedirect&&(this._config.needAdditionalRedirect=!0),this._config.params&&(this._params=g.getUrlSearchParams(this._config.params)),this.redirect={android:{chrome:"com.android.chrome",yandex:"com.yandex.browser",opera:"com.opera.browser",firefox:"org.mozilla.firefox",samsung_internet:"com.sec.android.app.sbrowser"},ios:{chrome:{https:"googlechromes://",http:"googlechrome://"},yandex:{https:"yandexbrowser-open-url://https://",http:"yandexbrowser-open-url://http://"},opera_touch:{https:"touch-https://",http:"touch-http://"},firefox:{https:"firefox://open-url%3Furl%3Dhttps%3A%2F%2F",http:"firefox://open-url%3Furl%3Dhttp%3A%2F%2F"}}},this.universalLinkUrl=a.universalLinkUrl||"https://online.sberbank.ru/CSAFront/oidc/sberbank_id/authorize.do",this.baseUrl=a.baseUrl||"https://online.sberbank.ru/CSAFront/oidc/authorize.do",this.deeplinkUrl=a.deeplinkUrl||"sberbankidlogin://sberbankidsso",this.init()}return a.prototype.isAllowedBrowser=function(a){return-1!==["chrome","yandex","firefox","samsung_internet","opera","opera_touch"].indexOf(a)},a.prototype.setAddionalRedirect=function(a,b){var c="https",d=g.isEncoded(this._params.redirect_uri)?decodeURIComponent(this._params.redirect_uri):this._params.redirect_uri;d&&(c=d.indexOf("https://")?"https":"http"),this.redirect.hasOwnProperty(a)&&this.redirect[a].hasOwnProperty(b)&&("android"===a?this._params.package=this.redirect[a][b]:"ios"===a&&(this._params.ext_redirect_uri=this.redirect[a][b][c]+(d||"").replace(/^https?:\/\//,"")))},a.prototype.browsingModeDetectorCallback=function(a){var b=!1,c=n.getParser(window.navigator.userAgent),d=c.getResult(),e=g.getBrowserAlias(c.getBrowserName());this._config.needAdditionalRedirect&&this.setAddionalRedirect(c.getOSName(!0),e),a||d.app.name||("ios"===c.getOSName(!0)?("safari"===e||this.isAllowedBrowser(e)&&this._config.needAdditionalRedirect)&&(b=!0):b=!("android"!==c.getOSName(!0)||!this.isAllowedBrowser(e)));var f=g.buildUrl(this.deeplinkUrl,this._params),h=g.buildUrl(b?this.universalLinkUrl:this.baseUrl,this._params),i={isPrivate:a,isUniversalLink:b,isWebview:!!d.app.name,os:c.getOSName(!0),browser:e,link:h,deeplink:f,universalLinkUrl:this.universalLinkUrl,defaultLinkUrl:this.baseUrl,deeplinkUrl:this.deeplinkUrl,oidc:this._params};if(this._config.selector){var j=document.querySelectorAll(this._config.selector);if(j.length>0)for(var k=0;k<j.length;k+=1)j[k].setAttribute("href",h)}if(this._config.formSelector){var l=document.querySelectorAll(this._config.formSelector);if(l.length>0)for(var k=0;k<l.length;k+=1)l[k].setAttribute("value",b)}this._config.callback&&"function"==typeof this._config.callback&&this._config.callback(i)},a.prototype.init=function(){this._browsingModeDetector=new o;try{this._browsingModeDetector.run(this.browsingModeDetectorCallback.bind(this))}catch(a){this.browsingModeDetectorCallback(!1)}},a}();Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(a,b){if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");for(var c=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(void 0!==e&&null!==e)for(var f=Object.keys(Object(e)),g=0,h=f.length;g<h;g++){var i=f[g],j=Object.getOwnPropertyDescriptor(e,i);void 0!==j&&j.enumerable&&(c[i]=e[i])}}return c}}),a.SberidUniversallink=v}("object"==typeof exports&&exports||this);